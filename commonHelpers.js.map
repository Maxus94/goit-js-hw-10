{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nconst inputCurrent = document.getElementById('datetime-picker');\nconst startButton = document.querySelector('button');\n\nconst daysCounter = document.querySelector('.value[data-days]');\nconst hoursCounter = document.querySelector('.value[data-hours]');\nconst minutesCounter = document.querySelector('.value[data-minutes]');\nconst secondsCounter = document.querySelector('.value[data-seconds]');\n\nlet userSelectedDate;\nstartButton.setAttribute('disabled', true);\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onChange(selectedDates) {\n    if (selectedDates[0].getTime() - Date.now() > 1000) {\n      startButton.removeAttribute('disabled');\n      iziToast.destroy();\n    } else {\n      startButton.setAttribute('disabled', true);\n      iziToast.destroy();\n      iziToast.show({\n        message: 'âŒ Please choose a date in the future',\n        close: false,\n        backgroundColor: 'red',\n        messageColor: 'white',\n        messageSize: 20,\n        timeout: 0,\n        position: 'topRight', // bottomRight, bottomLeft, topRight, topLeft, topCenter, bottomCenter, center\n      });\n    }\n  },\n  onClose(selectedDates) {\n    if (selectedDates[0].getTime() - Date.now() > 1000) {\n      iziToast.destroy();\n      startButton.removeAttribute('disabled');\n      userSelectedDate = selectedDates[0].getTime();\n    } else {\n      startButton.setAttribute('disabled', true);\n    }\n  },\n};\nconst timers = flatpickr('input#datetime-picker', options);\n\nstartButton.addEventListener('click', startButtonHandler);\n\nfunction startButtonHandler() {\n  const timerInterval = setInterval(fillTime, 1000);\n  inputCurrent.setAttribute('disabled', true);\n  setTimeout(() => {\n    clearInterval(timerInterval);\n    inputCurrent.removeAttribute('disabled');\n  }, userSelectedDate - Date.now());\n}\n\nfunction fillTime() {\n  const selected = convertMs(userSelectedDate - Date.now());\n  if (userSelectedDate - Date.now() > 0) {\n    daysCounter.textContent = addLeadingZero(selected.days);\n    hoursCounter.textContent = addLeadingZero(selected.hours);\n    minutesCounter.textContent = addLeadingZero(selected.minutes);\n    secondsCounter.textContent = addLeadingZero(selected.seconds);\n  }\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["inputCurrent","startButton","daysCounter","hoursCounter","minutesCounter","secondsCounter","userSelectedDate","options","selectedDates","iziToast","flatpickr","startButtonHandler","timerInterval","fillTime","selected","convertMs","addLeadingZero","value","ms","days","hours","minutes","seconds"],"mappings":"+IAKA,MAAMA,EAAe,SAAS,eAAe,iBAAiB,EACxDC,EAAc,SAAS,cAAc,QAAQ,EAE7CC,EAAc,SAAS,cAAc,mBAAmB,EACxDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAiB,SAAS,cAAc,sBAAsB,EAC9DC,EAAiB,SAAS,cAAc,sBAAsB,EAEpE,IAAIC,EACJL,EAAY,aAAa,WAAY,EAAI,EACzC,MAAMM,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,SAASC,EAAe,CAClBA,EAAc,CAAC,EAAE,QAAS,EAAG,KAAK,IAAK,EAAG,KAC5CP,EAAY,gBAAgB,UAAU,EACtCQ,EAAS,QAAO,IAEhBR,EAAY,aAAa,WAAY,EAAI,EACzCQ,EAAS,QAAO,EAChBA,EAAS,KAAK,CACZ,QAAS,uCACT,MAAO,GACP,gBAAiB,MACjB,aAAc,QACd,YAAa,GACb,QAAS,EACT,SAAU,UAClB,CAAO,EAEJ,EACD,QAAQD,EAAe,CACjBA,EAAc,CAAC,EAAE,QAAS,EAAG,KAAK,IAAK,EAAG,KAC5CC,EAAS,QAAO,EAChBR,EAAY,gBAAgB,UAAU,EACtCK,EAAmBE,EAAc,CAAC,EAAE,QAAO,GAE3CP,EAAY,aAAa,WAAY,EAAI,CAE5C,CACH,EACeS,EAAU,wBAAyBH,CAAO,EAEzDN,EAAY,iBAAiB,QAASU,CAAkB,EAExD,SAASA,GAAqB,CAC5B,MAAMC,EAAgB,YAAYC,EAAU,GAAI,EAChDb,EAAa,aAAa,WAAY,EAAI,EAC1C,WAAW,IAAM,CACf,cAAcY,CAAa,EAC3BZ,EAAa,gBAAgB,UAAU,CACxC,EAAEM,EAAmB,KAAK,IAAG,CAAE,CAClC,CAEA,SAASO,GAAW,CAClB,MAAMC,EAAWC,EAAUT,EAAmB,KAAK,IAAK,CAAA,EACpDA,EAAmB,KAAK,IAAG,EAAK,IAClCJ,EAAY,YAAcc,EAAeF,EAAS,IAAI,EACtDX,EAAa,YAAca,EAAeF,EAAS,KAAK,EACxDV,EAAe,YAAcY,EAAeF,EAAS,OAAO,EAC5DT,EAAe,YAAcW,EAAeF,EAAS,OAAO,EAEhE,CAEA,SAASE,EAAeC,EAAO,CAC7B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASF,EAAUG,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}